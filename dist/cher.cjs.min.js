/*!
 * Cher v1.1.0 (npm: cherjs)
 * https://cherjs.org/
 * Copyright (c) 2022-present Haász Sándor
 * Released under the MIT License.
 */
"use strict";function e(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}function t(e,t,r,n,a,i,s){try{var o=e[i](s),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,a)}function r(e){return function(){var r=this,n=arguments;return new Promise((function(a,i){var s=e.apply(r,n);function o(e){t(s,a,i,o,l,"next",e)}function l(e){t(s,a,i,o,l,"throw",e)}o(void 0)}))}}function n(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function a(t,r){return t.get(e(t,r))}function i(e,t,r){n(e,t),t.set(e,r)}function s(t,r,n){return t.set(e(t,r),n),n}function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=void 0;function h(e){return Object.freeze(e)}function f(){return Object.create(null)}function d(e,t){null!=t||(t=f());for(var r=f(),n=0;n<e.length;++n)r[e[n]]=t[e[n]];return r}function p(e){return d(Object.keys(e),e)}var v=h(p({GET:1,HEAD:1,POST:1,PUT:1,DELETE:1,CONNECT:1,OPTIONS:1,TRACE:1,PATCH:1})),b=h(p({GET:1,HEAD:1,CONNECT:1,OPTIONS:1,TRACE:1})),m=h(p({101:1,103:1,204:1,205:1,304:1})),y=String;function g(e){return void 0===e}function w(e){return Object(e)===e}function E(e){return Array.isArray(e)}function O(e,t,r){return e instanceof t||Object.prototype.toString.call(e)==="[object ".concat(r,"]")}function j(e,t,r){var n,a;r=w(r)?[y(null!==(n=r[0])&&void 0!==n?n:""),y(null!==(a=r[1])&&void 0!==a?a:"")]:[y(null!=r?r:""),y(null!=r?r:"")];var i=y(null!=e?e:"");return w(t)&&Object.keys(t).forEach((e=>{i=i.split("".concat(r[0]).concat(e).concat(r[1])).join(t[e])})),i}var T=function e(t){for(var r,n,a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];var o=i.length?e(...i):(null===(r=document)||void 0===r?void 0:r.baseURI)||(null===(n=location)||void 0===n?void 0:n.href);return""===y(t)&&(t=o),new URL(t,o)};function k(e,t){return[new URLSearchParams(null!=e?e:u).toString(),new URLSearchParams(null!=t?t:u).toString()].filter(Boolean).join("&")}function D(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var i=T(t,...n);return new URLSearchParams(e).forEach(((e,t)=>{i.searchParams.append(t,e)})),i.href}function P(e){if(O(e,FormData,"FormData"))return e;if(O(e,HTMLFormElement,"HTMLFormElement"))return new FormData(e);var t=new FormData;if(E(e)){for(var r=0;r<e.length;++r)t.append(...e[r]);return t}return O(e,URLSearchParams,"URLSearchParams")?(e.forEach(((e,r)=>{t.append(r,e)})),t):w(e)?(Object.keys(e).forEach((r=>{t.append(r,...E(e[r])?e[r]:[e[r]])})),t):new FormData(e)}class U extends Error{constructor(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];super(null==t?"HTTP ".concat(e.status||"<unknown-status>"," ").concat(e.statusText||""):t,...n),Error.captureStackTrace&&Error.captureStackTrace(this,U),this.name="ResponseError",this.response=e}}var L,R=h(p({json:(L=r((function*(e){var t=yield e.text();return t?JSON.parse(t):u})),function(e){return L.apply(this,arguments)}),"strict-json":"json",text:"text",url:"formData",form:"formData",blob:"blob",file:"blob",stream:!1,buffer:"arrayBuffer",none:u})),S=h(p({json:1,text:1,url:1,form:1,blob:1,file:1,stream:1,buffer:1,none:1})),A=p({method:u,evalTemplate:()=>j,delimiters:()=>["{","}"],baseURL:u,url:u,args:u,params:u,decode:"json",encode:"json",data:u,options:u}),C=c({},A),x=Object.keys(A),M=[...x],F=[...x,"listeners"];function W(e){return(e=y(e).toUpperCase())in v?e:u}function N(e){return"string"==typeof e||O(e,URL,"URL")}var H=new WeakMap,B=new WeakMap,G=new WeakMap,I=new WeakMap,z=new WeakMap,J=new WeakMap,q=new WeakMap,K=new WeakMap,Q=new WeakMap,V=new WeakMap,X=new WeakMap,Y=new WeakSet;class Z extends EventTarget{constructor(){var e,t;super(),n(e=this,t=Y),t.add(e),i(this,H,void 0),i(this,B,void 0),i(this,G,void 0),i(this,I,[]),i(this,z,void 0),i(this,J,void 0),i(this,q,void 0),i(this,K,void 0),i(this,Q,void 0),i(this,V,void 0),i(this,X,void 0),this.reset(),this.set(...arguments)}get supported(){return"function"==typeof fetch}get method(){return a(H,this)}set method(e){s(H,this,W(e))}get evalTemplate(){return a(B,this)}set evalTemplate(e){s(B,this,"function"==typeof e?e:e=>e)}get delimiters(){return a(G,this)}set delimiters(e){var t,r;s(G,this,w(e)?[y(null!==(t=e[0])&&void 0!==t?t:""),y(null!==(r=e[1])&&void 0!==r?r:"")]:[y(null!=e?e:""),y(null!=e?e:"")])}get baseURL(){return a(I,this)}set baseURL(e){null!=e||(e=[]),E(e)||(e=[...a(I,this),e]),s(I,this,e.reduce(((e,t)=>((t=y(null!=t?t:""))&&e.push(t),e)),[]))}get url(){return a(z,this)}set url(e){s(z,this,y(null!=e?e:""))}get args(){return a(J,this)}set args(e){s(J,this,null!=e?e:u)}get params(){return a(q,this)}set params(e){s(q,this,null!=e?e:u)}get decode(){return a(K,this)}set decode(e){s(K,this,e in R?y(e):u)}get encode(){return a(Q,this)}set encode(e){s(Q,this,e in S?y(e):u)}get data(){return a(V,this)}set data(e){s(V,this,e)}get options(){return a(X,this)}set options(e){if(w(e)){if("method"in(e=c({},e))){var t=W(e.method);g(t)?delete e.method:e.method=t}}else e=u;s(X,this,e)}getDefault(e){return A[e]}setDefault(e,t,r){e in x&&(A[e]=t,r&&(this[e]="function"==typeof A[e]?A[e]():A[e]))}resetDefault(e,t){this.setDefault(e,C[e],t)}getDefaults(){return d(x,A)}setDefaults(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,a;N(t[0])?([n,t,a]=t,t.url=n):[t,a]=t,null!=t||(t=f()),x.forEach((e=>{e in t&&this.setDefault(e,t[e],a)})),g(n)||this.setDefault("url",n,a)}resetDefaults(e){this.setDefaults(C,e)}reset(e){var t=e?C:A;x.forEach((e=>{this[e]="function"==typeof t[e]?t[e]():t[e]}))}set(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;N(t[0])?[n,t]=t:[t]=t,null!=t||(t=f()),M.forEach((e=>{e in t&&(this[e]=t[e])})),g(n)||(this.url=n)}getConfig(){return d(M,this)}getURL(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;N(t[0])?[n,t]=t:[t]=t,null!=t||(t=f());var{evalTemplate:a,delimiters:i,baseURL:s,args:o,params:l}=t;return g(n)&&({url:n}=t),a="function"==typeof a?a:this.evalTemplate,null!=i||(i=this.delimiters),s=[...this.baseURL,...(E(s)?s:[s]).reduce(((e,t)=>((t=y(null!=t?t:""))&&e.push(t),e)),[])],n=y(null!=n?n:this.url),function(e,t,r,n,a){for(var i=arguments.length,s=new Array(i>5?i-5:0),o=5;o<i;o++)s[o-5]=arguments[o];return D(n,...[a,...s].map((n=>e(y(null!=n?n:""),r,t))))}(a,i,o=c(c({},this.args),null!=o?o:u),l=k(this.params,null!=l?l:u),n,...s.reverse())}getOptions(t){null!=t||(t=f());var{decode:r,encode:n,data:a}=t,{method:i,options:s}=t;if(g(i=W(i))&&(i=this.method),i&&(i={method:i}),w(s)){if("method"in(s=c({},s))){var o=W(s.method);g(o)?delete s.method:s.method=o}}else s=u;i=(s=c(c(c({method:"GET"},this.options),s),i)).method,s.headers=new Headers(s.headers);var{headers:l}=s;return e(Y,this,$).call(this,l,r),e(Y,this,_).call(this,i,l,s,n,a),s}fetch(){for(var t,n=this,a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];N(i[0])?[t,i]=i:[i]=i,i=d(F,i),g(t)||(i.url=t);var{listeners:o}=i,l={instance:this,fetchConfig:i};return e(Y,this,le).call(this,"start",{detail:l},o),l.fetchUrl=this.getURL(i),l.fetchOptions=this.getOptions(i),l.fetch=fetch(l.fetchUrl,l.fetchOptions),e(Y,this,le).call(this,"started",{detail:l},o),l.fetch.then((t=>{if(l.response=t,e(Y,this,le).call(this,"loaded",{detail:l},o),!l.response.ok)throw new U(l.response);return e(Y,this,le).call(this,"checked",{detail:l},o),l.response})).then(function(){var t=r((function*(t){if(t.status in m||null==t.body)e(Y,n,le).call(n,"bodyless",{detail:l},o);else{var{decode:r}=i;r=y(null!=r?r:"")||n.decode,(r=R[r])?(t.data="function"==typeof r?yield r(t):yield t[r](),e(Y,n,le).call(n,"decoded",{detail:l},o)):(t.data=t.body,e(Y,n,le).call(n,"unprocessed",{detail:l},o))}return l.response}));return function(e){return t.apply(this,arguments)}}()).catch((t=>{if(l.error=t,e(Y,this,le).call(this,"error",{detail:l},o),null!=l.error)throw e(Y,this,le).call(this,"uncatched",{detail:l},o),l.error;return e(Y,this,le).call(this,"catched",{detail:l},o),l.response})).finally((()=>{e(Y,this,le).call(this,"end",{detail:l},o)}))}create(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!0===t[0]&&(t[0]=this.getConfig()),ce(...t)}}function $(e,t){var r;switch(t=t in R?y(t):this.decode){case"json":r="application/json,text/plain,*/*";break;case"text":r="text/plain,*/*";break;case"url":r="application/x-www-form-urlencoded,*/*";break;case"form":r="application/x-www-form-urlencoded,multipart/form-data,*/*";break;case"blob":case"file":case"stream":case"buffer":e.has("Accept")||(r="*/*")}return r||e.has("Accept")||(r="*/*"),r&&e.set("Accept",r),e}function _(t,r,n,a,i){if(t=W(t),a=a in S?y(a):this.encode,t in b)r.delete("Content-Type"),delete n.body;else if(g(i)&&g(this.data))g(n.body)&&(r.delete("Content-Type"),delete n.body);else switch(a){case"json":r.set("Content-Type","application/json;charset=UTF-8"),n.body=e(Y,this,ee).call(this,i);break;case"text":r.set("Content-Type","text/plain;charset=UTF-8"),n.body=e(Y,this,te).call(this,i);break;case"url":r.set("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),n.body=e(Y,this,re).call(this,i);break;case"form":r.delete("Content-Type"),n.body=e(Y,this,ne).call(this,i);break;case"blob":n.body=e(Y,this,ie).call(this,i);break;case"file":n.body=e(Y,this,se).call(this,i);break;case"stream":n.body=e(Y,this,oe).call(this,i);break;default:n.body=g(i)?this.data:i}}function ee(e){return E(e)?E(this.data)&&(e=[...this.data,...e]):w(e)?w(this.data)&&!E(this.data)&&(e=c(c({},this.data),e)):g(e)&&(e=this.data),JSON.stringify(e)}function te(e){return y(g(e)?this.data:e)}function re(e){return k(this.data,e)}function ne(e){if(g(this.data))return P(e);var t=P(this.data);return g(e)||P(e).forEach(((e,r)=>{t.append(r,e)})),t}function ae(e,t,r){return O(e=g(e)?this.data:e,t,r)?e:(E(e)||(e=[e]),new t(E(e[0])?e[0]:[e[0]],...e.slice(1)))}function ie(t){return e(Y,this,ae).call(this,t,Blob,"Blob")}function se(t){return e(Y,this,ae).call(this,t,File,"File")}function oe(e){return O(e=g(e)?this.data:e,ReadableStream,"ReadableStream")?e:new ReadableStream(...E(e)?e:[e])}function le(e,t,r){var n;null!=t||(t=f());var{detail:a}=t;(r=null===(n=r)||void 0===n?void 0:n[e])&&(r=E(r)?[...r]:[r]).forEach(((t,n)=>{E(t)||(r[n]=[t]),this.addEventListener(e,...r[n])})),this.dispatchEvent(new CustomEvent(e,{detail:a})),r&&r.forEach((t=>{this.removeEventListener(e,...t)}))}function ce(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=new Z(...t),a=n.fetch.bind(n);return["method","evalTemplate","delimiters","baseURL","url","args","params","decode","encode","data","options"].forEach((e=>{Object.defineProperty(a,e,{get:()=>n[e],set(t){n[e]=t}})})),["addEventListener","removeEventListener","dispatchEvent","getDefault","setDefault","resetDefault","getDefaults","setDefaults","resetDefaults","reset","set","getConfig","getURL","getOptions","fetch","create"].forEach((e=>{Object.defineProperty(a,e,{configurable:!0,writable:!0,value:n[e].bind(n)})})),a}var ue=ce();module.exports=ue;
//# sourceMappingURL=cher.cjs.min.js.map
